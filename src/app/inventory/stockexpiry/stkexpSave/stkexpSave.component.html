<style>
    #swidth {
        width: 320px;
    }
</style>
<app-card id="tab">
    <div class="sub-title">{{'expiredstock.expiredstock'| translate}}
        <em class="fa fa-warning ficon"></em>
    </div>

    <div class="panels">
        <div class="panel1" style="width:95%;float:left">
            <div align="right">
                <button type="button" class="btn-round" [routerLink]="['/ExpiredStock/ViewExpiredStock']">{{'expiredstock.viewexpirystocks'| translate}}</button>
            </div><br>
            <form [formGroup]="registerForm">

                <div formArrayName="stkexp" style="max-height:280px" class="flow">
                    <!--. table  start-->
                    <div>
                        <table aria-describedby="mydesc" class="table styletab">
                            <thead class="stylehead">
                                <tr>
                                    <th scope="col">
                                        <input type="checkbox" style="height:1.3em;width:1.5em" name="checkAll"
                                            (click)="selectAll($event)">
                                    </th>
                                    <th scope="col">  {{'common.sno'| translate}}</th>
                                    <th scope="col">{{'common.prodcode'| translate}}</th>
                                    <th scope="col">{{'common.prodname'| translate}}</th>
                                    <th scope="col">{{'salesinvoice.batchno'| translate}}</th>
                                    <th scope="col">{{'salesinvoice.expirydate'| translate}}</th>
                                    <th scope="col">{{'expiredstock.stockqty'| translate}}</th>
                                    <!-- <th scope="col">Box</th>
                                    <th scope="col">Strip</th> -->
                                    <!-- <th scope="col">No Of Qty</th>
                                    <th scope="col">Exp Qty</th> -->
                                    <th scope="col">{{'salesinvoice.unitprice'| translate}}</th>
                                    <th scope="col">{{'purchaseinvoice.totalamount'| translate}}</th>
                                    <th scope="col">{{'salesinvoice.action'| translate}}</th>
                                </tr>
                            </thead>
                            <tbody class="stylebody">
                                <tr *ngFor="let address of registerForm.controls.stkexp.controls; let i=index"
                                    [formGroupName]="i">
                                    <td>
                                        <input type="checkbox" name="check" class="tabcheck" id="width1"
                                            (change)="gettotalamount()" formControlName="delflag">
                                        <!-- <input type="checkbox" class="tabcheck" id="width1" formControlName="delflag"
                                            (change)="gettotalamount()" /> -->
                                    </td>
                                    <td id="width2">{{i+1}}
                                    </td>
                                    <!-- <td><input value={{i+1}} id="width2" /></td> -->
                                    <td><input formControlName="drugproductid" style="text-align:left" readonly /></td>
                                    <td><input formControlName="drugname" id="swidth" style="text-align:left"
                                            readonly /></td>
                                    <td><input formControlName="batchnumber" id="width5" style="text-align:left"
                                            readonly /></td>
                                    <td><input formControlName="expirydate" readonly /></td>
                                    <td><input formControlName="actualstockqty" readonly /></td>
                                    <!-- <td><input formControlName="expboxqty" /></td>
                                <td><input formControlName="expstripqty" (keydown)="calc($event)" /></td> -->
                                    <!-- <td><input formControlName="exptabqty" (keydown)="calc($event)" /></td>
                                    <td><input formControlName="expstockqty" /></td> -->
                                    <td><input formControlName="unitprice" (keydown)="calc($event)" /></td>
                                    <td><input formControlName="totprice" readonly /></td>
                                    <td>
                                        <div ngbDropdown class="dropdown-secondary dropdown">

                                            <button style="color:rgb(11, 12, 12);" ngbDropdownToggle
                                                class="btn btn-mini dropdown-toggle waves-light b-none txt-muted dropDownbutton"
                                                type="button" id="dropdown10" data-toggle="dropdown"
                                                aria-haspopup="true" aria-expanded="false">
                                                <em class="icofont icofont-navigation-menu"></em>
                                            </button>
                                            <div ngbDropdownMenu class="dropdown-menu" aria-labelledby="dropdown10"
                                                data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                                <!-- <a class="dropdown-item waves-light waves-effect" href="javascript:;"
                                                    skipLocationChange>
                                                    <!-- [routerLink]="['/SalesOrderLead/soleadrecord',val[0]]" -->
                                                <!-- <em class="icofont icofont-checked m-r-10">&nbsp; -->
                                                <!-- <span class="tdspan">Product Details</span> -->

                                                <!-- <span type="percentagecalc" class="btn viewbtn" (click)="percentagecal(percentagecalc)">Percentage</span> -->

                                                <!-- </em> -->
                                                <!-- </a> -->





                                                <a class="dropdown-item waves-light waves-effect" href="javascript:;">

                                                    <em class="icofont icofont-delete-alt action1">&nbsp;
                                                        <span class="btn viewbtn"
                                                            (click)="openConfirmsSwal(i)"> {{'damagestock.disposal'| translate}}</span>

                                                    </em>
                                                </a>
                                            </div>
                                        </div>
                                    </td>
                                <!-- <td>
                                <span class="label label-success" *ngIf="item[10]=='0'" style="font-size: 16px;">Destroy</span>
                                <span class="label label-success" *ngIf="item[10]=='1'" style="font-size: 16px;padding-left: 18px;padding-right: 18px;">Return</span>
                                </td> -->
                                </tr>
                                <tr *ngFor="let address of expirylength; let i=index">
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                <td><input type="text"  id="width1" readonly></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div><br>
                <!--. table     end-->

                <!-- <div class="row">
        
                    <div class="col-lg-4">
                        <label class="form-label"> To Loc Type
                        </label>
        
                        <select class="form-control" formControlName="tolocname" (change)="getlocrefname()">
                            <option value="opt1" selected disabled>---Select Loc Type---</option>
                            <option *ngFor="let coun of tolocname1 " value={{coun[0]}}>{{coun[1]}}</option>
                        </select>
                    </div>
                    <div class="col-lg-4">
                        <label class="form-label"> To Loc Name</label>
        
                        <select class="form-control" formControlName="tolocrefid">
                            <option value="opt1" selected disabled>---Select Loc Name---</option>
                            <option *ngFor="let coun of tolocrefid1 " value={{coun[0]}}>{{coun[1]}}</option>
                        </select>
                    </div>
                    <div class="col-lg-4">
                        <label class="form-label">Total Amount</label>
                        <input type="text" class="form-control" placeholder="" formControlName="totalamount">
                        <select class="form-control" formControlName="tolocrefid">
                            <option value="opt1" selected disabled>---Select Loc Name---</option>
                            <option *ngFor="let coun of tolocrefid1 " value={{coun[0]}}>{{coun[1]}}</option>
                        </select> 
                    </div>
                </div> -->
                <br>
                <div align="center">
                    <img src="assets/images/saveload.gif" alt="loading" class="mt-2" *ngIf="saveprocess">
                </div>


                <div class="form-group row">
                    <div class="col-lg-1"></div>
                    <div class="col-lg-3">
                        <button type="button" class="btn-round" (click)="opensaveSwal()"> {{'common.save'| translate}}</button>
                    </div>

                </div>

                <!-- row end-->

                <!-- <ng-template #conformation let-c="close" let-d="dismiss">
                    <div class="modal-header">
                        <label class="form-label">Disposal Conformation</label>
                        <em class="fa fa-times" (click)="c('Close click')" style="cursor:pointer"></em>
                    </div>
                    <img src="assets/images/poptab.jpg" alt="poptab" class="mt-4 modimg"><br>
            
                    <div class="modal-body mx-5">
                        <label class="text">Do you want disposal this product?</label>
                    </div>
                    <div class="modal-footer">
                        <label class="btn modbtn" id="typemain" (click)="destroyprod(i)">Save
                        </label>
                        <label class="btn modbtn">No</label>
            
                    </div>
                </ng-template> -->
            </form>
        </div>
        <div class="panel2" style="width:5%;float:right">
            <app-rightpanel [rightpanelData]="parentMessage"></app-rightpanel>
        </div>
    </div>

</app-card>
<ng2-toasty [position]="position"></ng2-toasty>