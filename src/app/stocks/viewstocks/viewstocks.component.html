<style>
  .action {
    font-size: 15px;
    color: green;
  }
  .action1 {
    font-size: 15px;
    color: red;
  }

	.stylelab {
		margin-right:9px;
		font-size: 20px;
		color: #5aa02c;
		font-family: Montserrat;
		font-weight: bold;
		cursor: pointer;
	}

	.dform-label{

		font-size:18px;
		color:brown;
		margin-left:5px;
		font-weight:bold;
	}

	
	.bform{
		border:2px solid #b3b3b3;
		border-radius:10px;
		padding:1em;
	}

  .shortexpiry{
  color:orange;
  }

  .expiry{
    color:red;
  }

  .qtyzero{
    color:brown;
    animation: blinker 1s linear infinite;
  }

  @keyframes blinker {
    50% {
      opacity: 0;
    }
  }
</style>
<app-card>
  <div class="sub-title">{{'stock.viewstocks'| translate}}
		<em class="fa fa-eye ficon"></em>
  </div>
  <div class="panels">
  <div class="panel1" style="width:95%;float:left">
    <div class="mr-2" align="right">
      <button type="button" class="btn-round" [routerLink]="['/StockEntryForm/AddNewStock']">{{'stock.addstocks'| translate}}</button>
    </div>
	  <div class="searchbox" align="center"><!-- [(ngModel)]="filterQuery"-->
      <input type="text"  *ngIf="drugsearch" [(ngModel)]="filterQuery"  (input)="getsearchvalue($event.target.value,1)" class="search" placeholder="Search Product Name...">
      <input type="text"  *ngIf="formsearch"    (input)="getsearchvalue($event.target.value,2)" class="search" placeholder="Search Formulation...">
    </div>
    <form [formGroup]="stockForm">
      <div align="center">
        <input type="checkbox" formControlName="drugsearch" (click)="check($event,0)" style="height:1.2em;width:1.1em">
        <label class="dform-label mr-3">Product Search</label>
        <input type="checkbox" formControlName="formsearch" (click)="check($event,1)" style="height:1.2em;width:1.1em">
        <label class="dform-label">Formulation Search</label>
      </div>
    </form>
    <div class="conditions">
      <h5 style="font-weight: bold;font-family: Montserrat;">Stocks Color Representations:</h5><br><br>
      <ol style="font-size: 16px;font-family: Montserrat;">
        <li>Red - Expired Stock</li>
        <li>Orange - Short Expiry Stock</li>
        <li>Brown with Blink - Zero Qty</li>        
      </ol> 
    </div><br>
    <div class="contain">
      <span (click)="getvalue(getval1)" #getval1 [ngStyle]="{'color':'A'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">A</span>
      <span (click)="getvalue(getval2)" #getval2 [ngStyle]="{'color':'B'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">B</span>
      <span (click)="getvalue(getval3)" #getval3 [ngStyle]="{'color':'C'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">C</span>
      <span (click)="getvalue(getval4)" #getval4 [ngStyle]="{'color':'D'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">D</span>
      <span (click)="getvalue(getval5)" #getval5 [ngStyle]="{'color':'E'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">E</span>
      <span (click)="getvalue(getval6)" #getval6 [ngStyle]="{'color':'F'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">F</span>
      <span (click)="getvalue(getval7)" #getval7 [ngStyle]="{'color':'G'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">G</span>
      <span (click)="getvalue(getval8)" #getval8 [ngStyle]="{'color':'H'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">H</span>
      <span (click)="getvalue(getval9)" #getval9 [ngStyle]="{'color':'I'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">I</span>
      <span (click)="getvalue(getval10)" #getval10 [ngStyle]="{'color':'J'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">J</span>
      <span (click)="getvalue(getval11)" #getval11 [ngStyle]="{'color':'K'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">K</span>
      <span (click)="getvalue(getval12)" #getval12 [ngStyle]="{'color':'L'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">L</span>
      <span (click)="getvalue(getval13)" #getval13 [ngStyle]="{'color':'M'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">M</span>
      <span (click)="getvalue(getval14)" #getval14 [ngStyle]="{'color':'N'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">N</span>
      <span (click)="getvalue(getval15)" #getval15 [ngStyle]="{'color':'O'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">O</span>
      <span (click)="getvalue(getval16)" #getval16 [ngStyle]="{'color':'P'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">P</span>
      <span (click)="getvalue(getval17)" #getval17 [ngStyle]="{'color':'Q'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">Q</span>
      <span (click)="getvalue(getval18)" #getval18 [ngStyle]="{'color':'R'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">R</span>
      <span (click)="getvalue(getval19)" #getval19 [ngStyle]="{'color':'S'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">S</span>
      <span (click)="getvalue(getval20)" #getval20 [ngStyle]="{'color':'T'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">T</span>
      <span (click)="getvalue(getval21)" #getval21 [ngStyle]="{'color':'U'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">U</span>
      <span (click)="getvalue(getval22)" #getval22 [ngStyle]="{'color':'V'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">V</span>
      <span (click)="getvalue(getval23)" #getval23 [ngStyle]="{'color':'W'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">W</span>
      <span (click)="getvalue(getval24)" #getval24 [ngStyle]="{'color':'X'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">X</span>
      <span (click)="getvalue(getval25)" #getval25 [ngStyle]="{'color':'Y'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">Y</span>
      <span (click)="getvalue(getval26)" #getval26 [ngStyle]="{'color':'Z'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">Z</span>

      
      <span (click)="getvalue(getval00)" #getval00 [ngStyle]="{'color':'0'==bindvalue?'red': '#5aa02c'}"
        class="stylelab ml-3">0</span>
      <span (click)="getvalue(getval01)" #getval01 [ngStyle]="{'color':'1'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">1</span>
      <span (click)="getvalue(getval02)" #getval02 [ngStyle]="{'color':'2'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">2</span>
      <span (click)="getvalue(getval03)" #getval03 [ngStyle]="{'color':'3'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">3</span>
      <span (click)="getvalue(getval04)" #getval04 [ngStyle]="{'color':'4'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">4</span>
      <span (click)="getvalue(getval05)" #getval05 [ngStyle]="{'color':'5'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">5</span>
      <span (click)="getvalue(getval06)" #getval06 [ngStyle]="{'color':'6'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">6</span>
      <span (click)="getvalue(getval07)" #getval07 [ngStyle]="{'color':'7'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">7</span>
      <span (click)="getvalue(getval08)" #getval08 [ngStyle]="{'color':'8'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">8</span>
      <span (click)="getvalue(getval09)" #getval09 [ngStyle]="{'color':'9'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">9</span>
      <span (click)="getvalue(getvalap)" #getvalap [ngStyle]="{'color':'α'==bindvalue?'red': '#5aa02c'}"
        class="stylelab ml-3">α</span>
      <span (click)="getvalue(getvalba)" #getvalba [ngStyle]="{'color':'β'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">β</span>
      <span (click)="getvalue(getvalca)" #getvalca [ngStyle]="{'color':'γ'==bindvalue?'red': '#5aa02c'}"
        class="stylelab">γ</span>
    </div>
		<div align="center">
			<img src="assets/images/loading.gif" alt="loading" height="100px" *ngIf="gifFail">
    </div>
    <div class="dt-responsive">
      <div style="overflow: auto">
        <table aria-describedby="mydesc" class="table table-striped table-bordered table-responsive full-data-table">
          <thead>
            <tr>
              <th scope="col">
                S.No
              </th>
              <th scope="col">
                {{'stock.productcode'| translate}}
              </th>
              <th scope="col">
                {{'stock.productname'| translate}}
              </th>
              <th scope="col">
                {{'stock.dosagevalue'| translate}}
              </th>
              <th scope="col">
                {{'stock.formulationname'| translate}}
              </th>
              <th scope="col">
                {{'stock.lotbatchnumber'| translate}}
              </th>
              <th scope="col">
               {{'stock.totalwithfree'| translate}}
              </th>
              <th scope="col">
                Damage Qty
               </th>
               <th scope="col">
                {{'stock.tabletquantity'| translate}}
               </th>
              <th scope="col">
                Free Qty
              </th>
              <th scope="col">
                {{'stock.expirydate'| translate}}
              </th>
              <th scope="col">
                MRP
              </th>
              <th scope="col">
                {{'stock.acquisitioncost'| translate}}
              </th>
              <th scope="col">
                {{'stock.sellingprice'| translate}}
              </th>
              <th scope="col">
                {{'stock.margin'| translate}}
              </th>
              <th scope="col">
                {{'stock.marginamount'| translate}}
              </th>
              <th scope="col">
                {{'stock.stockageing'| translate}}
              </th>
              <th scope="col">
                Action
              </th>
            </tr>
            <tr>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="stocklist.length == 0">
              <td></td>
              <td></td>
              <td></td>
              <td class="nodata">No Data Available</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
             <td></td> 
              <td></td>
              <td></td>
              <td></td> 
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <!--style.color-->
          <tr *ngFor="let val of stocklist | paginate: { id: 'listing_pagination',
            itemsPerPage: size, currentPage: page, totalItems: totalRec } let i = index"
            [ngClass]="(val.totqty<=0||val.totqty==null)?'qtyzero':(val.expiry==1)?'expiry':(val.convertdays<=val.days && val.convertdays>0) ? 'shortexpiry' : ''">
          <td>{{i+1}}</td>      
          <td>{{val.prodcode}}</td>
          <td>{{val.prodname}}</td>
          <td>{{val.dosage}}</td>
          <td>{{val.formulation}}</td>
          <td>{{val.batch}}</td>
          <td>{{val.totqty}}</td>
          <td>{{val.damageqty}}</td>
          <td>{{val.tabletqty}}</td>
          <td>{{val.freeqty}}</td>
          <td>{{val.expdate}}</td>
          <td style="text-align: right;">{{val.srp | number:'1.2-2'}}</td>
          <td style="text-align: right;">{{val.aqucost | number:'1.2-2'}}</td>
          <td style="text-align: right;">{{val.sellprice | number:'1.2-2'}}</td>
          <td>{{val.margin}}</td>
          <td style="text-align: right;">{{val.margpamd | number:'1.2-2'}}</td>
          <td>{{val.ageing}}</td>
          <td>
            <div ngbDropdown class="dropdown-secondary dropdown">
              <button style="color:deepskyblue;" ngbDropdownToggle class="btn btn-mini dropdown-toggle waves-light b-none txt-muted dropDownbutton"
                type="button" id="dropdown10" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <em class="icofont icofont-navigation-menu"></em>
              </button>
              <div ngbDropdownMenu class="dropdown-menu" aria-labelledby="dropdown10" data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                <a class="dropdown-item waves-light waves-effect" href="javascript:;" [routerLink]="['/StockEntryForm/editStock',val.stockid]" skipLocationChange>
                  <em class="icofont icofont-ui-edit action" title="Edit Company">&nbsp;
                    <span class="tdspan">Edit</span>
                  </em>
                </a>
                <a class="dropdown-item waves-light waves-effect" href="javascript:;" (click)="deleteStock(val.stockid)">
                  <em class="icofont icofont-delete-alt action1" title="Delete">&nbsp;
                    <span class="tdspan">Delete</span>
                  </em>
                </a>
              </div>
            </div>
          </td>
          </tr>
  
          </tbody>
          <tfoot>
            <tr>
              <td colspan="18" *ngIf="!searchdatatable">
                <pagination-controls id="listing_pagination" directionLinks="true"
                  (pageChange)="page = $event" (pageChange)="pagechange(page = $event)" style="float: right;"></pagination-controls>
              </td>
              <td colspan="18" *ngIf="searchdatatable">
                <pagination-controls id="listing_pagination" directionLinks="true"
                  (pageChange)="page = $event" (pageChange)="searchpagechange(page = $event)" style="float: right;"></pagination-controls>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div><br>
  </div>
  <div class="panel2" style="width:5%;float:right">
  <app-rightpanel [rightpanelData]="parentMessage"></app-rightpanel>
  </div>
  </div>
  

   <!-- <div class="row">
      <div class="col-xs-6 col-sm-4 col-sm-6 col-md-6"></div>
      <div class="col-xs-6 col-sm-6 col-sm-6 col-md-6" align="right">
        <select class="form-control selectsize mr-1" (change)="countchange($event.target.value)">
          <option disabled>--Select Count--</option>
          <option value="10">10</option>
          <option value="15">15</option>
          <option value="20">20</option>
        </select>
  
        <!-- <select class="form-control selectsize mr-1" (change)="searchcountchange($event.target.value)" *ngIf="searchdatatable">
          <option disabled>--Select Count--</option>
          <option value="10">10</option>
          <option value="15">15</option>
          <option value="20">20</option>
        </select> --
      </div>
  
    </div><br>  -->


</app-card>
<ng2-toasty [position]="'center-center'"></ng2-toasty>