

<app-card>
  <div class="sub-title">Add Patient's Relatives
    <i class="fa fa-money ficon"></i>
  </div><br>
  <form [formGroup]="relativesForm" (ngSubmit)="onSubmit()" class="mx-3">

    <div class="row">

      <!-- <div class="col-lg-4"> -->
        <!-- <label class="form-label semibold" for="exampleInput">Patient Name </label> -->
        <!-- formControlName="customerrefid"  -->
        <!-- <select class="form-control select2" formControlName="patientrefid">
          <option value="opt1 ">--Select Patient Name--</option>
          <option *ngFor="let item of patienname;let i = index" value={{item[0]}}>{{item[1]}}</option>

        </select>
        <p class="messages text-danger marginzero" *ngIf="relativesForm.controls.patientrefid.errors?.required">
          Select Customer
        </p>
      </div> -->
      <div class="col-lg-4">
        <fieldset class="form-group">
          <label class="form-label" for="exampleInput">Patient Name
              <span style="color:red">*</span>
          </label>
          <!-- <input type="text" class="form-control"  placeholder=" " /> -->
          <select name="select" class="form-control" placeholder="Select Patient" (change) ="getcont()" (blur) = "getcont()"
            formControlName="patientrefid">
            <option value="opt1" selected disabled>-----Select Patient Name-----</option>
            <option *ngFor="let pn of patienname" value="{{pn[1]}}">{{pn[0]}}</option>
          </select>
        </fieldset>
      </div>

      <div class="col-lg-4">
        <label class="form-label semibold" for="exampleInput"  >Contact No
        </label>

        <input type="text" class="form-control" formControlName = "mobile" />
      </div>

    </div>
   
      <div class="flow" style="overflow:auto" formArrayName="relativedetails">
      <!--. table  start-->
      <!-- -->
      <table class="table styletab" id="knowledgeTreeTable" (keydown)="autocleartable1()" >

        <thead class="stylehead">
          <tr>
            
            <th>S.No </th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Contact No</th>
            <th>Address</th>
            <th>Age</th>
            <th>Gender</th>
            <th>DOB</th>
            <th>E-Mail</th>
            <th>Relationship</th>
            <th>Action </th>
          </tr>
        </thead>

        <tbody class="stylebody">
          
          <tr *ngFor="let address of relativesForm.controls.relativedetails.controls; let i=index" [formGroupName]="i">
            <!-- <td>
              <input type="checkbox" id="width1" class="tabcheck"/>
            </td> -->
            <td>
              <input value={{i+1}} id="width2" readonly />
            </td>
            <td>
              <input type ="text" id="width5"  formControlName = "first_name"/>
              <div *ngIf="address.hasError('required', 'first_name')" style="color:red;">Enter First Name!</div>
            </td>
            <td>
              <input  type ="text"  id="width5" style="text-align:left" formControlName = "last_name" />
            </td>

            <td>
              <input type ="text"  id="width5"  type="number"formControlName = "contactno"/>
            </td>
            <td>
              <input type ="text"  id="swidth"  type="text" formControlName = "address"/>
            </td>

            <td>
              <input type ="text" id="width5"  formControlName = "age"/>
            </td>
            <td>
              <!-- <input  type ="text"  id="width5" style="text-align:left" formControlName = "sex" /> -->

              <select name="select"  id="width4" style="text-align:center"  placeholder="Select Sex" 
            formControlName="sex">
            <option value="opt1" selected disabled>-----Select Gender-----</option>
            <!-- <option *ngFor="let pn of patienname" value="{{pn[1]}}">{{pn[0]}}</option> -->
            <option value="male" style="text-align:center" >Male</option>
            <option value="female" style="text-align:center" >Female</option>
          </select>
            </td>

            <td>
              <input type ="date"  id="width5"  formControlName = "dob"/>
            </td>
            <td>
              <input type ="text"  id="swidth"  type="text" formControlName = "email" />
              <!-- <div *ngIf="address.hasError('required', 'email')" style="color:red;">Enter Mail id!</div> -->
             
            </td>


            
            <td>
              <input type ="text"  id="width6" formControlName = "relationship" (keydown)="addrelatives($event)"/>
              <div *ngIf="address.hasError('required', 'relationship')" style="color:red;">Enter Relationship!</div>
            </td>
            <td>
              <em class="fa fa-plus" style="color:green;font-weight: bold;cursor: pointer;"
              (click)="insertnewrelativerow()"></em>
            <em class="fa fa-close ml-3" style="color:brown;font-weight: bold;cursor: pointer;"
              (click)="removenewrelativerow(i)"></em>
            </td>
          </tr>

          <!-- <tr>
            <td>
                <input type="checkbox" id="width1" class="tabcheck">
            </td>
            <td>
              <input value="1" id="width2" readonly>
          </td>
          <td>
            <input type="text" id="width2">
        </td>
        <td>
          <input type="text" id="width2">
      </td>
      <td>
        <input type="text" id="width2">
    </td>
    <td>
      <input type="text" id="width2">
  </td>
  <td>
    <input type="text" id="width2">
</td>
            </tr> -->
      </table>
    </div><br>

    <!-- <div class="col-lg-5">
      <button type="button" class="btn btn-round" (click)="removeRow(i)"> Remove </button>
    </div><br> -->

    <div class="col-lg-4" >
			<div class="form-group">
				<button  class="btn btn-round" [disabled]="!relativesForm.valid">Save</button>
			</div>
    </div>
  </form>
</app-card>
<ng2-toasty [position]="'center-center'"></ng2-toasty>